/******************************************************************************
 *
 * 	Module: Hardware PWM
 *
 *	File Name: HwPWM.c
 *
 * 	Description: PWM using hardware
 *
 * 	Authors: Mahmoud Saad
 * 	
 *	Created on: Sunday, 15-Dec-19 11:49:49 AM
 *
 *******************************************************************************/

/*- INCLUDES ----------------------------------------------*/
#include "HwPWM.h"
/*- LOCAL MACROS ------------------------------------------*/
/*- LOCAL FUNCTIONS PROTOTYPES ----------------------------*/
/*- GLOBAL STATIC VARIABLES -------------------------------*/
/*- GLOBAL EXTERN VARIABLES -------------------------------*/
/*- LOCAL FUNCTIONS IMPLEMENTATION ------------------------*/
/*- APIs IMPLEMENTATION -----------------------------------*/


/**********************************************************************************************
 * 	Function name: HwPWM_Init
 *
 * 	Brief: 
 *
 * 	Details: 
 *
 * 	Arguments:
 * 		-
 *
 * 	Return:
 * 		-
 **********************************************************************************************/
void HwPWM_Init(void)
{
	gpioPinDirection(MOTOR_EN_1_GPIO, MOTOR_EN_1_BIT, HIGH);
	gpioPinDirection(MOTOR_EN_2_GPIO, MOTOR_EN_2_BIT, HIGH);
	TCCR1 = 0xA013;
}

/**********************************************************************************************
 * 	Function name: HwPWM_ChangeWidth
 *
 * 	Brief: 
 *
 * 	Details: 
 *
 * 	Arguments:
 * 		-
 *
 * 	Return:
 * 		-
 **********************************************************************************************/
void HwPWM_ChangeWidth(uint8 duty, uint32 frequency)
{
	frequency/=2;
	ICR1 = frequency;
	OCR1A = duty*frequency/100;
	OCR1B = duty*frequency/100;
}

/*******************************************************************************
 *			Preprocessor Macros                                    
 *******************************************************************************/


/*******************************************************************************
 *			Functions Prototypes                                   
 *******************************************************************************/

/*******************************************************************************
*			Functions Definitions                                  
 *******************************************************************************/

/*******************************************************************************
 *			Private functions Prototypes                                   
 *******************************************************************************/
/*******************************************************************************
 *			Global variables
 *******************************************************************************/
/*******************************************************************************
 *			Static global variables
 *******************************************************************************/
/*******************************************************************************
 *			Extern Global variables
 *******************************************************************************/

/*******************************************************************************
 *			Enumerations and structures declarations                                  
 *******************************************************************************/
 


